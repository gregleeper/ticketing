{"ast":null,"code":"import _regeneratorRuntime from \"/Users/gregleeper/jds/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/gregleeper/jds/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/gregleeper/jds/pages/commodities/index.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Table from \"../../components/table\";\nimport Layout from \"../../components/layout\";\nimport { listCommoditys } from \"../../src/graphql/queries.ts\";\nimport { useState, useEffect, useMemo } from \"react\";\nimport { API } from \"aws-amplify\";\nimport Link from \"next/link\";\n\nvar Commodities = function Commodities() {\n  _s();\n\n  var _useState = useState([]),\n      commodities = _useState[0],\n      setCommodities = _useState[1];\n\n  var getCommodities = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$API$graphql, myCommodities;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return API.graphql({\n                query: listCommoditys\n              });\n\n            case 2:\n              _yield$API$graphql = _context.sent;\n              myCommodities = _yield$API$graphql.data.listCommoditys.items;\n              setCommodities(myCommodities);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getCommodities() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getCommodities();\n  }, []);\n  var columns = useMemo(function () {\n    return [{\n      Header: \"Commodity Name\",\n      accessor: \"name\"\n    }, {\n      Header: \"Edit\",\n      accessor: \"id\",\n      Cell: function Cell(_ref2) {\n        var value = _ref2.value;\n        return __jsx(Link, {\n          href: \"/commodities/edit/[id]\",\n          as: \"/commodities/edit/\".concat(value),\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 36,\n            columnNumber: 11\n          }\n        }, __jsx(\"a\", {\n          className: \"text-blue-600 underline hover:text-blue-800 hover:no-underline\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 13\n          }\n        }, \" \", \"View\"));\n      }\n    }];\n  }, []);\n  return __jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"px-6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"text-center w-1/2 mx-auto py-6 text-2xl font-bold\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, __jsx(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }\n  }, \"Commodities\")), __jsx(\"div\", {\n    className: \"my-6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, __jsx(Link, {\n    href: \"/commodities/create\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }\n  }, __jsx(\"a\", {\n    className: \"px-3 py-2 border border-gray-800 shadow hover:bg-gray-800 hover:text-white\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, \"Create New\"))), __jsx(\"div\", {\n    className: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, __jsx(Table, {\n    columns: columns,\n    data: commodities,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }))));\n};\n\n_s(Commodities, \"nk/stdxHXkgQu2IkHgqJFJ15M68=\");\n\n_c = Commodities;\nexport var __N_SSP = true;\nexport default Commodities;\n\nvar _c;\n\n$RefreshReg$(_c, \"Commodities\");","map":{"version":3,"sources":["/Users/gregleeper/jds/pages/commodities/index.js"],"names":["Table","Layout","listCommoditys","useState","useEffect","useMemo","API","Link","Commodities","commodities","setCommodities","getCommodities","graphql","query","myCommodities","data","items","columns","Header","accessor","Cell","value"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,wBAAlB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,SAASC,cAAT,QAA+B,8BAA/B;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,OAA9B,QAA6C,OAA7C;AACA,SAASC,GAAT,QAAoC,aAApC;AACA,OAAOC,IAAP,MAAiB,WAAjB;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AAAA;;AAAA,kBACcL,QAAQ,CAAC,EAAD,CADtB;AAAA,MACjBM,WADiB;AAAA,MACJC,cADI;;AAGxB,MAAMC,cAAc;AAAA,wEAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAKXL,GAAG,CAACM,OAAJ,CAAY;AACpBC,gBAAAA,KAAK,EAAEX;AADa,eAAZ,CALW;;AAAA;AAAA;AAGQY,cAAAA,aAHR,sBAEnBC,IAFmB,CAGjBb,cAHiB,CAGCc,KAHD;AAQrBN,cAAAA,cAAc,CAACI,aAAD,CAAd;;AARqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAdH,cAAc;AAAA;AAAA;AAAA,KAApB;;AAWAP,EAAAA,SAAS,CAAC,YAAM;AACdO,IAAAA,cAAc;AACf,GAFQ,EAEN,EAFM,CAAT;AAIA,MAAMM,OAAO,GAAGZ,OAAO,CACrB;AAAA,WAAM,CACJ;AACEa,MAAAA,MAAM,EAAE,gBADV;AAEEC,MAAAA,QAAQ,EAAE;AAFZ,KADI,EAKJ;AACED,MAAAA,MAAM,EAAE,MADV;AAEEC,MAAAA,QAAQ,EAAE,IAFZ;AAGEC,MAAAA,IAAI,EAAE;AAAA,YAAGC,KAAH,SAAGA,KAAH;AAAA,eACJ,MAAC,IAAD;AAAM,UAAA,IAAI,EAAC,wBAAX;AAAoC,UAAA,EAAE,8BAAuBA,KAAvB,CAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAG,UAAA,SAAS,EAAC,gEAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG,GADH,SADF,CADI;AAAA;AAHR,KALI,CAAN;AAAA,GADqB,EAmBrB,EAnBqB,CAAvB;AAsBA,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,mDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,CADF,EAIE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC,qBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAG,IAAA,SAAS,EAAC,4EAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,CADF,CAJF,EAWE;AAAK,IAAA,SAAS,EAAC,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AAAO,IAAA,OAAO,EAAEJ,OAAhB;AAAyB,IAAA,IAAI,EAAER,WAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAXF,CADF,CADF;AAmBD,CA3DD;;GAAMD,W;;KAAAA,W;;AAkFN,eAAeA,WAAf","sourcesContent":["import Table from \"../../components/table\";\nimport Layout from \"../../components/layout\";\nimport { listCommoditys } from \"../../src/graphql/queries.ts\";\nimport { useState, useEffect, useMemo } from \"react\";\nimport { API, withSSRContext } from \"aws-amplify\";\nimport Link from \"next/link\";\n\nconst Commodities = () => {\n  const [commodities, setCommodities] = useState([]);\n\n  const getCommodities = async () => {\n    const {\n      data: {\n        listCommoditys: { items: myCommodities },\n      },\n    } = await API.graphql({\n      query: listCommoditys,\n    });\n    setCommodities(myCommodities);\n  };\n\n  useEffect(() => {\n    getCommodities();\n  }, []);\n\n  const columns = useMemo(\n    () => [\n      {\n        Header: \"Commodity Name\",\n        accessor: \"name\",\n      },\n      {\n        Header: \"Edit\",\n        accessor: \"id\",\n        Cell: ({ value }) => (\n          <Link href=\"/commodities/edit/[id]\" as={`/commodities/edit/${value}`}>\n            <a className=\"text-blue-600 underline hover:text-blue-800 hover:no-underline\">\n              {\" \"}\n              View\n            </a>\n          </Link>\n        ),\n      },\n    ],\n    []\n  );\n\n  return (\n    <Layout>\n      <div className=\"px-6\">\n        <div className=\"text-center w-1/2 mx-auto py-6 text-2xl font-bold\">\n          <h3>Commodities</h3>\n        </div>\n        <div className=\"my-6\">\n          <Link href=\"/commodities/create\">\n            <a className=\"px-3 py-2 border border-gray-800 shadow hover:bg-gray-800 hover:text-white\">\n              Create New\n            </a>\n          </Link>\n        </div>\n        <div className=\"\">\n          <Table columns={columns} data={commodities} />\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport async function getServerSideProps({ req, res }) {\n  const { Auth } = withSSRContext({ req });\n  try {\n    const user = await Auth.currentAuthenticatedUser();\n    return {\n      props: {\n        authenticated: true,\n        username: user.username,\n      },\n    };\n  } catch (err) {\n    res.writeHead(302, { Location: \"/sign-in\" });\n    res.end();\n    return {\n      props: {\n        authenticated: false,\n      },\n    };\n  }\n}\n\nexport default Commodities;\n"]},"metadata":{},"sourceType":"module"}