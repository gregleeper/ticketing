{"ast":null,"code":"var _jsxFileName = \"/Users/gregleeper/jds/pages/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from \"next/head\";\nimport Layout from \"../components/layout\";\nimport { API, withSSRContext } from \"aws-amplify\";\nimport { listTickets } from \"../src/graphql/queries.ts\";\nimport { useQueryCache, useQuery } from \"react-query\";\nimport { useEffect } from \"react\";\nimport { ReactQueryDevtools, ReactQueryDevtoolsPanel } from \"react-query-devtools\";\nexport default function Home() {\n  const queryCache = useQueryCache();\n\n  const prefetchTickets = async () => {\n    await queryCache.prefetchQuery(\"tickets\", async () => {\n      const {\n        data: {\n          listTickets: ticketsData\n        }\n      } = await API.graphql({\n        query: listTickets,\n        variables: {\n          limit: 1\n        }\n      });\n      return ticketsData;\n    });\n  }; //   id: \"8439e5c1-2e44-421a-86bf-c5391cffdf34\"\n  // contractId: \"c136ab73-5ec0-4278-8eb5-b73ca4196f88\"\n  // type: \"Ticket\"\n  // ▶ contract 20 items\n  // ticketDate: \"2019-08-02T05:00:00.000Z\"\n  // fieldNum: \"SWM16\"\n  // baleCount: 36\n  // ticketNumber: \"27824\"\n  // ladingNumber: null\n  // driver: \"RON\"\n  // truckNumber: \"350\"\n  // grossWeight: 66600\n  // tareWeight: 31060\n  // netWeight: 35540\n  // netTons: 17.77\n  // createdAt: \"2020-10-20T20:45:42.310Z\"\n  // updatedAt: \"2020-10-20T20:45:42.310Z\"\n\n\n  useEffect(() => {\n    if (!queryCache.getQueryData(\"tickets\")) {\n      prefetchTickets();\n    }\n  }, []);\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, \"Hello\"), __jsx(ReactQueryDevtools, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }));\n}\nexport async function getServerSideProps({\n  req,\n  res\n}) {\n  const {\n    Auth\n  } = withSSRContext({\n    req\n  });\n\n  try {\n    const user = await Auth.currentAuthenticatedUser();\n    return {\n      props: {\n        authenticated: true,\n        username: user.username\n      }\n    };\n  } catch (err) {\n    res.writeHead(302, {\n      Location: \"/sign-in\"\n    });\n    res.end();\n    return {\n      props: {\n        authenticated: false\n      }\n    };\n  }\n}","map":{"version":3,"sources":["/Users/gregleeper/jds/pages/index.js"],"names":["Head","Layout","API","withSSRContext","listTickets","useQueryCache","useQuery","useEffect","ReactQueryDevtools","ReactQueryDevtoolsPanel","Home","queryCache","prefetchTickets","prefetchQuery","data","ticketsData","graphql","query","variables","limit","getQueryData","getServerSideProps","req","res","Auth","user","currentAuthenticatedUser","props","authenticated","username","err","writeHead","Location","end"],"mappings":";;;AAAA,OAAOA,IAAP,MAAiB,WAAjB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAASC,GAAT,EAAcC,cAAd,QAAoC,aAApC;AACA,SAASC,WAAT,QAA4B,2BAA5B;AACA,SAASC,aAAT,EAAwBC,QAAxB,QAAwC,aAAxC;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SACEC,kBADF,EAEEC,uBAFF,QAGO,sBAHP;AAKA,eAAe,SAASC,IAAT,GAAgB;AAC7B,QAAMC,UAAU,GAAGN,aAAa,EAAhC;;AAEA,QAAMO,eAAe,GAAG,YAAY;AAClC,UAAMD,UAAU,CAACE,aAAX,CAAyB,SAAzB,EAAoC,YAAY;AACpD,YAAM;AACJC,QAAAA,IAAI,EAAE;AAAEV,UAAAA,WAAW,EAAEW;AAAf;AADF,UAEF,MAAMb,GAAG,CAACc,OAAJ,CAAY;AACpBC,QAAAA,KAAK,EAAEb,WADa;AAEpBc,QAAAA,SAAS,EAAE;AACTC,UAAAA,KAAK,EAAE;AADE;AAFS,OAAZ,CAFV;AAQA,aAAOJ,WAAP;AACD,KAVK,CAAN;AAWD,GAZD,CAH6B,CAiB7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEAR,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACI,UAAU,CAACS,YAAX,CAAwB,SAAxB,CAAL,EAAyC;AACvCR,MAAAA,eAAe;AAChB;AACF,GAJQ,EAIN,EAJM,CAAT;AAMA,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,EAEE,MAAC,kBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF;AAMD;AAED,OAAO,eAAeS,kBAAf,CAAkC;AAAEC,EAAAA,GAAF;AAAOC,EAAAA;AAAP,CAAlC,EAAgD;AACrD,QAAM;AAAEC,IAAAA;AAAF,MAAWrB,cAAc,CAAC;AAAEmB,IAAAA;AAAF,GAAD,CAA/B;;AACA,MAAI;AACF,UAAMG,IAAI,GAAG,MAAMD,IAAI,CAACE,wBAAL,EAAnB;AAEA,WAAO;AACLC,MAAAA,KAAK,EAAE;AACLC,QAAAA,aAAa,EAAE,IADV;AAELC,QAAAA,QAAQ,EAAEJ,IAAI,CAACI;AAFV;AADF,KAAP;AAMD,GATD,CASE,OAAOC,GAAP,EAAY;AACZP,IAAAA,GAAG,CAACQ,SAAJ,CAAc,GAAd,EAAmB;AAAEC,MAAAA,QAAQ,EAAE;AAAZ,KAAnB;AACAT,IAAAA,GAAG,CAACU,GAAJ;AACA,WAAO;AACLN,MAAAA,KAAK,EAAE;AACLC,QAAAA,aAAa,EAAE;AADV;AADF,KAAP;AAKD;AACF","sourcesContent":["import Head from \"next/head\";\nimport Layout from \"../components/layout\";\nimport { API, withSSRContext } from \"aws-amplify\";\nimport { listTickets } from \"../src/graphql/queries.ts\";\nimport { useQueryCache, useQuery } from \"react-query\";\nimport { useEffect } from \"react\";\nimport {\n  ReactQueryDevtools,\n  ReactQueryDevtoolsPanel,\n} from \"react-query-devtools\";\n\nexport default function Home() {\n  const queryCache = useQueryCache();\n\n  const prefetchTickets = async () => {\n    await queryCache.prefetchQuery(\"tickets\", async () => {\n      const {\n        data: { listTickets: ticketsData },\n      } = await API.graphql({\n        query: listTickets,\n        variables: {\n          limit: 1,\n        },\n      });\n      return ticketsData;\n    });\n  };\n\n  //   id: \"8439e5c1-2e44-421a-86bf-c5391cffdf34\"\n  // contractId: \"c136ab73-5ec0-4278-8eb5-b73ca4196f88\"\n  // type: \"Ticket\"\n  // ▶ contract 20 items\n  // ticketDate: \"2019-08-02T05:00:00.000Z\"\n  // fieldNum: \"SWM16\"\n  // baleCount: 36\n  // ticketNumber: \"27824\"\n  // ladingNumber: null\n  // driver: \"RON\"\n  // truckNumber: \"350\"\n  // grossWeight: 66600\n  // tareWeight: 31060\n  // netWeight: 35540\n  // netTons: 17.77\n  // createdAt: \"2020-10-20T20:45:42.310Z\"\n  // updatedAt: \"2020-10-20T20:45:42.310Z\"\n\n  useEffect(() => {\n    if (!queryCache.getQueryData(\"tickets\")) {\n      prefetchTickets();\n    }\n  }, []);\n\n  return (\n    <Layout>\n      <div>Hello</div>\n      <ReactQueryDevtools />\n    </Layout>\n  );\n}\n\nexport async function getServerSideProps({ req, res }) {\n  const { Auth } = withSSRContext({ req });\n  try {\n    const user = await Auth.currentAuthenticatedUser();\n\n    return {\n      props: {\n        authenticated: true,\n        username: user.username,\n      },\n    };\n  } catch (err) {\n    res.writeHead(302, { Location: \"/sign-in\" });\n    res.end();\n    return {\n      props: {\n        authenticated: false,\n      },\n    };\n  }\n}\n"]},"metadata":{},"sourceType":"module"}