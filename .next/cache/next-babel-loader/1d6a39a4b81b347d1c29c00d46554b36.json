{"ast":null,"code":"import _regeneratorRuntime from \"/Users/gregleeper/jds/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/gregleeper/jds/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/gregleeper/jds/pages/index.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from \"next/head\";\nimport Layout from \"../components/layout\";\nimport { API } from \"aws-amplify\";\nimport { listTickets } from \"../src/graphql/queries.ts\";\nimport { useQueryCache, useQuery } from \"react-query\";\nimport { useEffect } from \"react\";\nimport { ReactQueryDevtools, ReactQueryDevtoolsPanel } from \"react-query-devtools\";\nexport var __N_SSP = true;\nexport default function Home() {\n  _s();\n\n  var queryCache = useQueryCache();\n\n  var prefetchTickets = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return queryCache.prefetchQuery(\"tickets\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                var _yield$API$graphql, ticketsData;\n\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.next = 2;\n                        return API.graphql({\n                          query: listTickets,\n                          variables: {\n                            limit: 1\n                          }\n                        });\n\n                      case 2:\n                        _yield$API$graphql = _context.sent;\n                        ticketsData = _yield$API$graphql.data.listTickets;\n                        return _context.abrupt(\"return\", ticketsData);\n\n                      case 5:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              })));\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function prefetchTickets() {\n      return _ref.apply(this, arguments);\n    };\n  }(); //   id: \"8439e5c1-2e44-421a-86bf-c5391cffdf34\"\n  // contractId: \"c136ab73-5ec0-4278-8eb5-b73ca4196f88\"\n  // type: \"Ticket\"\n  // ▶ contract 20 items\n  // ticketDate: \"2019-08-02T05:00:00.000Z\"\n  // fieldNum: \"SWM16\"\n  // baleCount: 36\n  // ticketNumber: \"27824\"\n  // ladingNumber: null\n  // driver: \"RON\"\n  // truckNumber: \"350\"\n  // grossWeight: 66600\n  // tareWeight: 31060\n  // netWeight: 35540\n  // netTons: 17.77\n  // createdAt: \"2020-10-20T20:45:42.310Z\"\n  // updatedAt: \"2020-10-20T20:45:42.310Z\"\n\n\n  useEffect(function () {\n    if (!queryCache.getQueryData(\"tickets\")) {\n      prefetchTickets();\n    }\n  }, []);\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, \"Hello\"), __jsx(ReactQueryDevtools, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }));\n}\n\n_s(Home, \"ffq4I+dSXhUmun6jmi0/cbjNCvg=\", false, function () {\n  return [useQueryCache];\n});\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/Users/gregleeper/jds/pages/index.js"],"names":["Head","Layout","API","listTickets","useQueryCache","useQuery","useEffect","ReactQueryDevtools","ReactQueryDevtoolsPanel","Home","queryCache","prefetchTickets","prefetchQuery","graphql","query","variables","limit","ticketsData","data","getQueryData"],"mappings":";;;;;;;;AAAA,OAAOA,IAAP,MAAiB,WAAjB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAASC,GAAT,QAAoC,aAApC;AACA,SAASC,WAAT,QAA4B,2BAA5B;AACA,SAASC,aAAT,EAAwBC,QAAxB,QAAwC,aAAxC;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SACEC,kBADF,EAEEC,uBAFF,QAGO,sBAHP;;AAKA,eAAe,SAASC,IAAT,GAAgB;AAAA;;AAC7B,MAAMC,UAAU,GAAGN,aAAa,EAAhC;;AAEA,MAAMO,eAAe;AAAA,wEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAChBD,UAAU,CAACE,aAAX,CAAyB,SAAzB,wEAAoC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAG9BV,GAAG,CAACW,OAAJ,CAAY;AACpBC,0BAAAA,KAAK,EAAEX,WADa;AAEpBY,0BAAAA,SAAS,EAAE;AACTC,4BAAAA,KAAK,EAAE;AADE;AAFS,yBAAZ,CAH8B;;AAAA;AAAA;AAEjBC,wBAAAA,WAFiB,sBAEtCC,IAFsC,CAE9Bf,WAF8B;AAAA,yDASjCc,WATiC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAApC,GADgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAfN,eAAe;AAAA;AAAA;AAAA,KAArB,CAH6B,CAiB7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEAL,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI,CAACI,UAAU,CAACS,YAAX,CAAwB,SAAxB,CAAL,EAAyC;AACvCR,MAAAA,eAAe;AAChB;AACF,GAJQ,EAIN,EAJM,CAAT;AAMA,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,EAEE,MAAC,kBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF;AAMD;;GA/CuBF,I;UACHL,a;;;KADGK,I","sourcesContent":["import Head from \"next/head\";\nimport Layout from \"../components/layout\";\nimport { API, withSSRContext } from \"aws-amplify\";\nimport { listTickets } from \"../src/graphql/queries.ts\";\nimport { useQueryCache, useQuery } from \"react-query\";\nimport { useEffect } from \"react\";\nimport {\n  ReactQueryDevtools,\n  ReactQueryDevtoolsPanel,\n} from \"react-query-devtools\";\n\nexport default function Home() {\n  const queryCache = useQueryCache();\n\n  const prefetchTickets = async () => {\n    await queryCache.prefetchQuery(\"tickets\", async () => {\n      const {\n        data: { listTickets: ticketsData },\n      } = await API.graphql({\n        query: listTickets,\n        variables: {\n          limit: 1,\n        },\n      });\n      return ticketsData;\n    });\n  };\n\n  //   id: \"8439e5c1-2e44-421a-86bf-c5391cffdf34\"\n  // contractId: \"c136ab73-5ec0-4278-8eb5-b73ca4196f88\"\n  // type: \"Ticket\"\n  // ▶ contract 20 items\n  // ticketDate: \"2019-08-02T05:00:00.000Z\"\n  // fieldNum: \"SWM16\"\n  // baleCount: 36\n  // ticketNumber: \"27824\"\n  // ladingNumber: null\n  // driver: \"RON\"\n  // truckNumber: \"350\"\n  // grossWeight: 66600\n  // tareWeight: 31060\n  // netWeight: 35540\n  // netTons: 17.77\n  // createdAt: \"2020-10-20T20:45:42.310Z\"\n  // updatedAt: \"2020-10-20T20:45:42.310Z\"\n\n  useEffect(() => {\n    if (!queryCache.getQueryData(\"tickets\")) {\n      prefetchTickets();\n    }\n  }, []);\n\n  return (\n    <Layout>\n      <div>Hello</div>\n      <ReactQueryDevtools />\n    </Layout>\n  );\n}\n\nexport async function getServerSideProps({ req, res }) {\n  const { Auth } = withSSRContext({ req });\n  try {\n    const user = await Auth.currentAuthenticatedUser();\n\n    return {\n      props: {\n        authenticated: true,\n        username: user.username,\n      },\n    };\n  } catch (err) {\n    res.writeHead(302, { Location: \"/sign-in\" });\n    res.end();\n    return {\n      props: {\n        authenticated: false,\n      },\n    };\n  }\n}\n"]},"metadata":{},"sourceType":"module"}