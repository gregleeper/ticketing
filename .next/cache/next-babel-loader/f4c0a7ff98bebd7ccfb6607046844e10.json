{"ast":null,"code":"var _jsxFileName = \"/Users/gregleeper/jds/pages/tickets/create.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Formik, Field, Form } from \"formik\";\nimport { useRouter } from \"next/router\";\nimport { useState, useEffect } from \"react\";\nimport { FormikSelect } from \"../../components/formikSelectTickets\";\nimport Layout from \"../../components/layout\";\nimport { API, withSSRContext } from \"aws-amplify\";\nimport { createTicket } from \"../../src/graphql/mutations.ts\";\nimport { listContracts } from \"../../src/graphql/queries.ts\";\nimport { ticketsByContract } from \"../../src/graphql/customQueries\";\nimport DatePicker from \"react-datepicker\";\nimport { truncateString } from \"../../utils\";\nimport { useQuery, useMutation, useQueryCache } from \"react-query\";\nimport { ReactQueryDevtools } from \"react-query-devtools\";\nimport { CreateTicketSchema } from \"../../components/validationSchema\";\n\nconst CreateTicket = () => {\n  const queryCache = useQueryCache();\n  const router = useRouter();\n  const {\n    0: contracts,\n    1: setContracts\n  } = useState([]);\n  const {\n    0: correspondingContracts,\n    1: setCorrespondingContracts\n  } = useState([]);\n  const {\n    0: ticketDate,\n    1: setTicketDate\n  } = useState(new Date());\n  const {\n    0: ticketSuccess1,\n    1: setTicketSuccess1\n  } = useState(false);\n  const {\n    0: ticketSuccess2,\n    1: setTicketSuccess2\n  } = useState(false);\n  const {\n    0: contractId,\n    1: setContractId\n  } = useState(null);\n  const {\n    0: purchasedFromQtyRemaining,\n    1: setPurchasedFromQuantityRemaining\n  } = useState(null);\n  const {\n    0: soldToQtyRemaining,\n    1: setSoldToQuantityRemaining\n  } = useState(null);\n  const {\n    0: correspondingContractId,\n    1: setCorrespondingContractId\n  } = useState(null);\n  const {\n    0: ticketError,\n    1: setTicketError\n  } = useState(null);\n  const {\n    0: createdTickets,\n    1: setCreatedTickets\n  } = useState([]);\n  const [mutate, {\n    data,\n    error,\n    isSuccess\n  }] = useMutation(async input => {\n    const {\n      data: ticketData\n    } = await API.graphql({\n      query: createTicket,\n      variables: {\n        input\n      }\n    });\n    return ticketData;\n  }, {\n    onSuccess: ({\n      createTicket\n    }) => {\n      let ticketsCreated = [...createdTickets];\n      ticketsCreated.push(createTicket);\n      setCreatedTickets(ticketsCreated);\n      const lengthOfGroups = queryCache.getQueryData(\"tickets\").length;\n      let previousData = queryCache.getQueryData(\"tickets\");\n      previousData[lengthOfGroups - 1].items.push(createTicket);\n      return () => queryCache.setQueryData(\"tickets\", () => [previousData]);\n    },\n    onError: ({\n      ticketError\n    }) => {\n      setTicketError(ticketError);\n    }\n  });\n  const {\n    data: contractsData\n  } = useQuery(\"contracts\", async () => {\n    const {\n      data: {\n        listContracts: contractsData\n      }\n    } = await API.graphql({\n      query: listContracts,\n      variables: {\n        limit: 3000\n      }\n    });\n    return contractsData;\n  }, {\n    cacheTime: 1000 * 60 * 20\n  });\n\n  const getPurchasedFromTickets = async () => {\n    const {\n      data: {\n        ticketsByContract: {\n          items: purchasedFromTickets\n        }\n      }\n    } = await API.graphql({\n      query: ticketsByContract,\n      variables: {\n        contractId,\n        limit: 1000\n      }\n    });\n\n    if (purchasedFromTickets.length > 0) {\n      const contractNumber = purchasedFromTickets[0].contract.contractNumber;\n      const contractedQty = purchasedFromTickets[0].contract.quantity;\n      const qtyRemaining = contractedQty - purchasedFromTickets.reduce((acc, cv) => acc + cv.netTons, 0);\n      setPurchasedFromQuantityRemaining({\n        contractNumber,\n        contractedQty,\n        qtyRemaining\n      });\n    } else {\n      const contract = contractsData.items.findIndex(contract => contract.id === contractId);\n      const myContract = contractsData.items[contract];\n      console.log(myContract);\n      setPurchasedFromQuantityRemaining({\n        contractNumber: myContract.contractNumber,\n        contractedQty: myContract.quantity,\n        qtyRemaining: myContract.quantity\n      });\n    }\n  };\n\n  const getSoldToTickets = async () => {\n    const {\n      data: {\n        ticketsByContract: {\n          items: soldToTickets\n        }\n      }\n    } = await API.graphql({\n      query: ticketsByContract,\n      variables: {\n        contractId: correspondingContractId,\n        limit: 1000\n      }\n    });\n\n    if (soldToTickets.length > 0) {\n      const contractNumber = soldToTickets[0].contract.contractNumber;\n      const contractedQty = soldToTickets[0].contract.quantity;\n      const qtyRemaining = contractedQty - soldToTickets.reduce((acc, cv) => acc + cv.netTons, 0);\n      setSoldToQuantityRemaining({\n        contractNumber,\n        contractedQty,\n        qtyRemaining\n      });\n    } else {\n      const contract = contractsData.items.findIndex(contract => contract.id === correspondingContractId);\n      const myContract = contractsData.items[contract];\n      console.log(myContract);\n      setSoldToQuantityRemaining({\n        contractNumber: myContract.contractNumber,\n        contractedQty: myContract.quantity,\n        qtyRemaining: myContract.quantity\n      });\n    }\n  };\n\n  const handleContractIdChange = value => {\n    setContractId(value);\n  };\n\n  const handleCorrespondingContractIdChange = value => {\n    console.log(value);\n    setCorrespondingContractId(value);\n  };\n\n  useEffect(() => {\n    if (contractsData) {\n      let options = [];\n      contractsData.items.map(c => {\n        options.push({\n          value: c.id,\n          label: `${c.contractNumber} - ${c.contractTo.companyReportName} - ${c.contractType}`\n        });\n      });\n      setContracts(options);\n      setCorrespondingContracts(options);\n    }\n  }, [contractsData]);\n  useEffect(() => {\n    if (contractId) {\n      getPurchasedFromTickets();\n    }\n\n    if (correspondingContractId) {\n      getSoldToTickets();\n    }\n  }, [contractId, correspondingContractId]);\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"text-center w-1/2 mx-auto py-6 text-2xl font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 9\n    }\n  }, __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 11\n    }\n  }, \"Create Ticket\")), __jsx(\"div\", {\n    className: \"flex justify-around relative \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"w-1/2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 11\n    }\n  }, __jsx(Formik, {\n    initialValues: {\n      contractId: \"\",\n      correspondingContractId: \"\",\n      ticketDate: ticketDate,\n      fieldNum: \"\",\n      baleCount: 0,\n      ticketNumber: \"\",\n      ladingNumber: \"\",\n      driver: \"\",\n      truckNumber: \"\",\n      grossWeight: 0,\n      tareWeight: 0,\n      netWeight: 0,\n      netTons: 0\n    },\n    validationSchema: CreateTicketSchema,\n    onSubmit: async (values, actions) => {\n      let netWeight = values.grossWeight - values.tareWeight;\n      let netTons = netWeight / 2000;\n      const input1 = {\n        contractId: values.contractId,\n        correspondingContractId: values.correspondingContractId,\n        ticketDate: ticketDate,\n        fieldNum: values.fieldNum,\n        baleCount: values.baleCount === \"\" ? null : values.baleCount,\n        ticketNumber: values.ticketNumber,\n        ladingNumber: values.ladingNumber,\n        driver: values.driver,\n        type: \"Ticket\",\n        truckNumber: values.truckNumber,\n        grossWeight: values.grossWeight,\n        tareWeight: values.tareWeight,\n        netWeight,\n        netTons\n      };\n\n      try {\n        mutate(input1);\n        setTicketSuccess1(true);\n      } catch (err) {\n        if (err) {\n          setTicketError(err);\n        }\n      }\n\n      const input2 = {\n        contractId: values.correspondingContractId,\n        correspondingContractId: values.contractId,\n        ticketDate: ticketDate,\n        fieldNum: values.fieldNum,\n        baleCount: values.baleCount === \"\" ? null : values.baleCount,\n        ticketNumber: values.ticketNumber,\n        ladingNumber: values.ladingNumber,\n        driver: values.driver,\n        type: \"Ticket\",\n        truckNumber: values.truckNumber,\n        grossWeight: values.grossWeight,\n        tareWeight: values.tareWeight,\n        netWeight,\n        netTons\n      };\n\n      try {\n        mutate(input2);\n        setTicketSuccess2(true);\n      } catch (err) {\n        if (err) {\n          setTicketError(err);\n        }\n      }\n\n      setTimeout(() => {\n        setTicketSuccess1(false);\n        setTicketSuccess2(false);\n        setCorrespondingContractId(null);\n        setContractId(null);\n      }, 2000);\n      actions.resetForm();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }\n  }, ({\n    isSubmitting,\n    errors,\n    touched,\n    values\n  }) => __jsx(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"w-full mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 19\n    }\n  }, __jsx(\"div\", {\n    className: \"flex justify-between items-center mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    className: \"text-gray-900 w-1/4 md:w-1/2\",\n    htmlFor: \"ticketNumber\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 23\n    }\n  }, \"Ticket Number\"), __jsx(Field, {\n    className: \"form-input w-full\",\n    name: \"ticketNumber\",\n    placeholder: \"Ticket Number\",\n    autoComplete: \"on\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 23\n    }\n  }), errors.ticketNumber && touched.ticketNumber ? __jsx(\"div\", {\n    className: \"text-red-700 ml-2 bg-red-200 px-2 py-1 rounded-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 25\n    }\n  }, errors.ticketNumber) : null), __jsx(\"div\", {\n    className: \"flex justify-between items-center mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    className: \"text-gray-900 w-1/4 md:w-1/2\",\n    htmlFor: \"contractId\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 23\n    }\n  }, \"Contract Number - Purchased From\"), __jsx(Field, {\n    className: \"form-select w-full\",\n    component: FormikSelect,\n    options: contracts,\n    name: \"contractId\",\n    handleChange: handleContractIdChange,\n    placeholder: \"Contract Number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 23\n    }\n  }), errors.contractId && touched.contractId ? __jsx(\"div\", {\n    className: \"text-red-700 ml-2 bg-red-200 px-2 py-1 rounded-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 25\n    }\n  }, errors.contractId) : null), __jsx(\"div\", {\n    className: \"flex justify-between items-center mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    className: \"text-gray-900 w-1/4 md:w-1/2\",\n    htmlFor: \"correspondingContractId\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 23\n    }\n  }, \"Corresponding Contract Number - Sold To\"), __jsx(Field, {\n    className: \"form-select w-full\",\n    component: FormikSelect,\n    options: correspondingContracts,\n    handleChange: handleCorrespondingContractIdChange,\n    name: \"correspondingContractId\",\n    placeholder: \"Contract Number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 23\n    }\n  }), errors.correspondingContractId && touched.correspondingContractId ? __jsx(\"div\", {\n    className: \"text-red-700 ml-2 bg-red-200 px-2 py-1 rounded-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 25\n    }\n  }, errors.correspondingContractId) : null), __jsx(\"div\", {\n    className: \"flex justify-between items-center mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    className: \"text-gray-900 w-1/4 md:w-1/2\",\n    htmlFor: \"ticketDate\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 23\n    }\n  }, \"Ticket Date\"), __jsx(DatePicker, {\n    selected: ticketDate,\n    onChange: date => {\n      console.log(date), setTicketDate(date);\n    },\n    className: \"form-input w-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 23\n    }\n  })), __jsx(\"div\", {\n    className: \"flex justify-between items-center mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    className: \"text-gray-900 w-1/4 md:w-1/2\",\n    htmlFor: \"fieldNum\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 23\n    }\n  }, \"Field Number\"), __jsx(Field, {\n    className: \"form-input w-full\",\n    name: \"fieldNum\",\n    placeholder: \"Field Number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 23\n    }\n  }), errors.fieldNum && touched.fieldNum ? __jsx(\"div\", {\n    className: \"text-red-700 ml-2 bg-red-200 px-2 py-1 rounded-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 25\n    }\n  }, errors.fieldNum) : null), __jsx(\"div\", {\n    className: \"flex justify-between items-center mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    className: \"text-gray-900 w-1/4 md:w-1/2\",\n    htmlFor: \"baleCount\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 23\n    }\n  }, \"Bale Count\"), __jsx(Field, {\n    className: \"form-input w-full\",\n    name: \"baleCount\",\n    placeholder: \"Bale Count\",\n    type: \"number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 23\n    }\n  })), __jsx(\"div\", {\n    className: \"flex justify-between items-center mb-4 w-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    className: \"text-gray-900 w-1/4 md:w-1/2 pr-4\",\n    name: \"ladingNumber\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 23\n    }\n  }, \"Lading Number\"), __jsx(Field, {\n    className: \"form-input w-full\",\n    name: \"ladingNumber\",\n    placeholder: \"Lading Number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 23\n    }\n  }), errors.ladingNumber && touched.ladingNumber ? __jsx(\"div\", {\n    className: \"text-red-700 ml-2 bg-red-200 px-2 py-1 rounded-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 25\n    }\n  }, errors.ladingNumber) : null), __jsx(\"div\", {\n    className: \"flex justify-between items-center mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    className: \"w-1/4 text-gray-900 md:w-1/2\",\n    htmlFor: \"driver\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 23\n    }\n  }, \"Driver\"), __jsx(Field, {\n    className: \"form-input w-full\",\n    name: \"driver\",\n    placeholder: \"Driver\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 23\n    }\n  }), errors.drivers && touched.drivers ? __jsx(\"div\", {\n    className: \"text-red-700 ml-2 bg-red-200 px-2 py-1 rounded-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 25\n    }\n  }, errors.drivers) : null), __jsx(\"div\", {\n    className: \"flex justify-between items-center mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    className: \"w-1/4 text-gray-900 md:w-1/2\",\n    htmlFor: \"truckNumber\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 23\n    }\n  }, \"Truck Number\"), __jsx(Field, {\n    className: \"form-input w-full\",\n    name: \"truckNumber\",\n    placeholder: \"Truck Number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 23\n    }\n  }), errors.truckNumber && touched.truckNumber ? __jsx(\"div\", {\n    className: \"text-red-700 ml-2 bg-red-200 px-2 py-1 rounded-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 25\n    }\n  }, errors.truckNumber) : null), __jsx(\"div\", {\n    className: \"flex justify-between items-center mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 446,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    className: \"w-1/4 text-gray-900 md:w-1/2\",\n    htmlFor: \"grossWeight\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 447,\n      columnNumber: 23\n    }\n  }, \"Gross Weight\"), __jsx(Field, {\n    className: \"form-input w-full\",\n    name: \"grossWeight\",\n    type: \"number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 23\n    }\n  }), errors.grossWeight && touched.grossWeight ? __jsx(\"div\", {\n    className: \"text-red-700 ml-2 bg-red-200 px-2 py-1 rounded-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 25\n    }\n  }, errors.grossWeight) : null), __jsx(\"div\", {\n    className: \"flex justify-between items-center mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 464,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    className: \"w-1/4 text-gray-900 md:w-1/2\",\n    htmlFor: \"tareWeight\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 23\n    }\n  }, \"Tare Weight\"), __jsx(Field, {\n    className: \"form-input w-full\",\n    name: \"tareWeight\",\n    type: \"number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 23\n    }\n  }), errors.tareWeight && touched.tareWeight ? __jsx(\"div\", {\n    className: \"text-red-700 ml-2 bg-red-200 px-2 py-1 rounded-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 477,\n      columnNumber: 25\n    }\n  }, errors.tareWeight) : null), __jsx(\"div\", {\n    className: \"flex justify-between items-center mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 482,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    className: \"w-1/4 text-gray-900 md:w-1/2\",\n    htmlFor: \"netWeight\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 23\n    }\n  }, \"Net Weight\"), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 489,\n      columnNumber: 23\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 490,\n      columnNumber: 25\n    }\n  }, values.grossWeight && values.tareWeight ? (values.grossWeight - values.tareWeight).toFixed(2) : \"Not calculated\"))), __jsx(\"div\", {\n    className: \"flex justify-between items-center mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 499,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    className: \"w-1/4 text-gray-900 md:w-1/2\",\n    htmlFor: \"netTons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 23\n    }\n  }, \"Net Tons\"), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 506,\n      columnNumber: 23\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 507,\n      columnNumber: 25\n    }\n  }, values.grossWeight && values.tareWeight ? ((values.grossWeight - values.tareWeight) / 2000).toFixed(2) : \"Not calculated\"))), __jsx(\"div\", {\n    className: \"flex justify-center mt-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 518,\n      columnNumber: 21\n    }\n  }, __jsx(\"button\", {\n    className: \"px-3 py-2 border border-red-500 shadow hover:bg-red-500 hover:text-white mr-12\",\n    onClick: () => router.back(),\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 519,\n      columnNumber: 23\n    }\n  }, \"Cancel\"), __jsx(\"button\", {\n    className: \"px-3 py-2 border border-gray-800 shadow hover:bg-gray-800 hover:text-white disabled:opacity-25\",\n    type: \"submit\",\n    disabled: isSubmitting || purchasedFromQtyRemaining && purchasedFromQtyRemaining.qtyRemaining <= 0 || soldToQtyRemaining && soldToQtyRemaining.qtyRemaining < 0.01,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 526,\n      columnNumber: 23\n    }\n  }, \"Submit\"))))), ticketError ? __jsx(\"div\", {\n    className: \"bg-red-600 text-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 545,\n      columnNumber: 15\n    }\n  }, console.log(ticketError)) : __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 549,\n      columnNumber: 15\n    }\n  }), ticketSuccess1 && ticketSuccess2 ? __jsx(\"div\", {\n    className: \"absolute inset-0 flex items-center justify-center \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 552,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \" w-64 h-24 text-white bg-green-500 bg-opacity-75 py-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 553,\n      columnNumber: 17\n    }\n  }, __jsx(\"span\", {\n    className: \"px-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 554,\n      columnNumber: 19\n    }\n  }, \"Successfully created ticet.\"))) : __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 558,\n      columnNumber: 15\n    }\n  })), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 561,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"w-2/12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 562,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"border-b-4 w-full border-gray-600 mb-3 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 563,\n      columnNumber: 15\n    }\n  }, __jsx(\"h6\", {\n    className: \"text-gray-900 text-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 564,\n      columnNumber: 17\n    }\n  }, \"Created Tickets\")), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 566,\n      columnNumber: 15\n    }\n  }, __jsx(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 567,\n      columnNumber: 17\n    }\n  }, createdTickets.length ? createdTickets.map(ticket => __jsx(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 570,\n      columnNumber: 23\n    }\n  }, `${truncateString(ticket.id, 7)} - ${ticket.ticketNumber}`)) : __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 575,\n      columnNumber: 21\n    }\n  }, \"0\")))), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 580,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"mt-8 border-b-4 border-gray-600 mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 581,\n      columnNumber: 15\n    }\n  }, __jsx(\"h6\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 582,\n      columnNumber: 17\n    }\n  }, \"Chosen Contract Values\")), purchasedFromQtyRemaining ? __jsx(\"div\", {\n    className: \"bg-blue-300 bg-opacity-50 px-2 py-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 585,\n      columnNumber: 17\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 586,\n      columnNumber: 19\n    }\n  }, \"Purchased From:\"), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 587,\n      columnNumber: 19\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 588,\n      columnNumber: 21\n    }\n  }, purchasedFromQtyRemaining.contractNumber)), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 590,\n      columnNumber: 19\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 591,\n      columnNumber: 21\n    }\n  }, \"Contract Qty: \"), __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 592,\n      columnNumber: 21\n    }\n  }, purchasedFromQtyRemaining.contractedQty)), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 594,\n      columnNumber: 19\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 595,\n      columnNumber: 21\n    }\n  }, \"Qty Remaining: \"), __jsx(\"span\", {\n    className: `${purchasedFromQtyRemaining.qtyRemaining < 25 ? \"text-red-500\" : \"text-gray-900\"}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 596,\n      columnNumber: 21\n    }\n  }, purchasedFromQtyRemaining.qtyRemaining.toFixed(2)))) : null, soldToQtyRemaining ? __jsx(\"div\", {\n    className: \"bg-green-300 bg-opacity-50 px-2 py-2 mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 609,\n      columnNumber: 17\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 610,\n      columnNumber: 19\n    }\n  }, \"Sold To:\"), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 611,\n      columnNumber: 19\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 612,\n      columnNumber: 21\n    }\n  }, soldToQtyRemaining.contractNumber)), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 614,\n      columnNumber: 19\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 615,\n      columnNumber: 21\n    }\n  }, \"Contract Qty: \"), __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 616,\n      columnNumber: 21\n    }\n  }, soldToQtyRemaining.contractedQty)), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 618,\n      columnNumber: 19\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 619,\n      columnNumber: 21\n    }\n  }, \"Qty Remaining: \"), __jsx(\"span\", {\n    className: `${soldToQtyRemaining.qtyRemaining < 25 ? \"text-red-500\" : \"text-gray-900\"}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 620,\n      columnNumber: 21\n    }\n  }, soldToQtyRemaining.qtyRemaining.toFixed(2)))) : null)))), __jsx(ReactQueryDevtools, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 636,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport async function getServerSideProps({\n  req,\n  res\n}) {\n  const {\n    Auth\n  } = withSSRContext({\n    req\n  });\n\n  try {\n    const user = await Auth.currentAuthenticatedUser();\n    return {\n      props: {\n        authenticated: true,\n        username: user.username\n      }\n    };\n  } catch (err) {\n    res.writeHead(302, {\n      Location: \"/sign-in\"\n    });\n    res.end();\n    return {\n      props: {\n        authenticated: false\n      }\n    };\n  }\n}\nexport default CreateTicket;","map":{"version":3,"sources":["/Users/gregleeper/jds/pages/tickets/create.js"],"names":["Formik","Field","Form","useRouter","useState","useEffect","FormikSelect","Layout","API","withSSRContext","createTicket","listContracts","ticketsByContract","DatePicker","truncateString","useQuery","useMutation","useQueryCache","ReactQueryDevtools","CreateTicketSchema","CreateTicket","queryCache","router","contracts","setContracts","correspondingContracts","setCorrespondingContracts","ticketDate","setTicketDate","Date","ticketSuccess1","setTicketSuccess1","ticketSuccess2","setTicketSuccess2","contractId","setContractId","purchasedFromQtyRemaining","setPurchasedFromQuantityRemaining","soldToQtyRemaining","setSoldToQuantityRemaining","correspondingContractId","setCorrespondingContractId","ticketError","setTicketError","createdTickets","setCreatedTickets","mutate","data","error","isSuccess","input","ticketData","graphql","query","variables","onSuccess","ticketsCreated","push","lengthOfGroups","getQueryData","length","previousData","items","setQueryData","onError","contractsData","limit","cacheTime","getPurchasedFromTickets","purchasedFromTickets","contractNumber","contract","contractedQty","quantity","qtyRemaining","reduce","acc","cv","netTons","findIndex","id","myContract","console","log","getSoldToTickets","soldToTickets","handleContractIdChange","value","handleCorrespondingContractIdChange","options","map","c","label","contractTo","companyReportName","contractType","fieldNum","baleCount","ticketNumber","ladingNumber","driver","truckNumber","grossWeight","tareWeight","netWeight","values","actions","input1","type","err","input2","setTimeout","resetForm","isSubmitting","errors","touched","date","drivers","toFixed","back","ticket","getServerSideProps","req","res","Auth","user","currentAuthenticatedUser","props","authenticated","username","writeHead","Location","end"],"mappings":"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","sourcesContent":["import { Formik, Field, Form } from \"formik\";\nimport { useRouter } from \"next/router\";\nimport { useState, useEffect } from \"react\";\nimport { FormikSelect } from \"../../components/formikSelectTickets\";\nimport Layout from \"../../components/layout\";\nimport { API, withSSRContext } from \"aws-amplify\";\nimport { createTicket } from \"../../src/graphql/mutations.ts\";\nimport { listContracts } from \"../../src/graphql/queries.ts\";\nimport { ticketsByContract } from \"../../src/graphql/customQueries\";\nimport DatePicker from \"react-datepicker\";\nimport { truncateString } from \"../../utils\";\nimport { useQuery, useMutation, useQueryCache } from \"react-query\";\nimport { ReactQueryDevtools } from \"react-query-devtools\";\nimport { CreateTicketSchema } from \"../../components/validationSchema\";\n\nconst CreateTicket = () => {\n  const queryCache = useQueryCache();\n  const router = useRouter();\n  const [contracts, setContracts] = useState([]);\n  const [correspondingContracts, setCorrespondingContracts] = useState([]);\n  const [ticketDate, setTicketDate] = useState(new Date());\n  const [ticketSuccess1, setTicketSuccess1] = useState(false);\n  const [ticketSuccess2, setTicketSuccess2] = useState(false);\n  const [contractId, setContractId] = useState(null);\n  const [\n    purchasedFromQtyRemaining,\n    setPurchasedFromQuantityRemaining,\n  ] = useState(null);\n  const [soldToQtyRemaining, setSoldToQuantityRemaining] = useState(null);\n  const [correspondingContractId, setCorrespondingContractId] = useState(null);\n  const [ticketError, setTicketError] = useState(null);\n\n  const [createdTickets, setCreatedTickets] = useState([]);\n\n  const [mutate, { data, error, isSuccess }] = useMutation(\n    async (input) => {\n      const { data: ticketData } = await API.graphql({\n        query: createTicket,\n        variables: {\n          input,\n        },\n      });\n      return ticketData;\n    },\n    {\n      onSuccess: ({ createTicket }) => {\n        let ticketsCreated = [...createdTickets];\n        ticketsCreated.push(createTicket);\n\n        setCreatedTickets(ticketsCreated);\n        const lengthOfGroups = queryCache.getQueryData(\"tickets\").length;\n\n        let previousData = queryCache.getQueryData(\"tickets\");\n        previousData[lengthOfGroups - 1].items.push(createTicket);\n        return () => queryCache.setQueryData(\"tickets\", () => [previousData]);\n      },\n      onError: ({ ticketError }) => {\n        setTicketError(ticketError);\n      },\n    }\n  );\n\n  const { data: contractsData } = useQuery(\n    \"contracts\",\n    async () => {\n      const {\n        data: { listContracts: contractsData },\n      } = await API.graphql({\n        query: listContracts,\n        variables: {\n          limit: 3000,\n        },\n      });\n      return contractsData;\n    },\n    {\n      cacheTime: 1000 * 60 * 20,\n    }\n  );\n\n  const getPurchasedFromTickets = async () => {\n    const {\n      data: {\n        ticketsByContract: { items: purchasedFromTickets },\n      },\n    } = await API.graphql({\n      query: ticketsByContract,\n      variables: {\n        contractId,\n        limit: 1000,\n      },\n    });\n    if (purchasedFromTickets.length > 0) {\n      const contractNumber = purchasedFromTickets[0].contract.contractNumber;\n      const contractedQty = purchasedFromTickets[0].contract.quantity;\n      const qtyRemaining =\n        contractedQty -\n        purchasedFromTickets.reduce((acc, cv) => acc + cv.netTons, 0);\n\n      setPurchasedFromQuantityRemaining({\n        contractNumber,\n        contractedQty,\n        qtyRemaining,\n      });\n    } else {\n      const contract = contractsData.items.findIndex(\n        (contract) => contract.id === contractId\n      );\n      const myContract = contractsData.items[contract];\n      console.log(myContract);\n      setPurchasedFromQuantityRemaining({\n        contractNumber: myContract.contractNumber,\n        contractedQty: myContract.quantity,\n        qtyRemaining: myContract.quantity,\n      });\n    }\n  };\n\n  const getSoldToTickets = async () => {\n    const {\n      data: {\n        ticketsByContract: { items: soldToTickets },\n      },\n    } = await API.graphql({\n      query: ticketsByContract,\n      variables: {\n        contractId: correspondingContractId,\n        limit: 1000,\n      },\n    });\n\n    if (soldToTickets.length > 0) {\n      const contractNumber = soldToTickets[0].contract.contractNumber;\n      const contractedQty = soldToTickets[0].contract.quantity;\n      const qtyRemaining =\n        contractedQty - soldToTickets.reduce((acc, cv) => acc + cv.netTons, 0);\n\n      setSoldToQuantityRemaining({\n        contractNumber,\n        contractedQty,\n        qtyRemaining,\n      });\n    } else {\n      const contract = contractsData.items.findIndex(\n        (contract) => contract.id === correspondingContractId\n      );\n      const myContract = contractsData.items[contract];\n      console.log(myContract);\n      setSoldToQuantityRemaining({\n        contractNumber: myContract.contractNumber,\n        contractedQty: myContract.quantity,\n        qtyRemaining: myContract.quantity,\n      });\n    }\n  };\n\n  const handleContractIdChange = (value) => {\n    setContractId(value);\n  };\n\n  const handleCorrespondingContractIdChange = (value) => {\n    console.log(value);\n    setCorrespondingContractId(value);\n  };\n\n  useEffect(() => {\n    if (contractsData) {\n      let options = [];\n      contractsData.items.map((c) => {\n        options.push({\n          value: c.id,\n          label: `${c.contractNumber} - ${c.contractTo.companyReportName} - ${c.contractType}`,\n        });\n      });\n      setContracts(options);\n      setCorrespondingContracts(options);\n    }\n  }, [contractsData]);\n\n  useEffect(() => {\n    if (contractId) {\n      getPurchasedFromTickets();\n    }\n    if (correspondingContractId) {\n      getSoldToTickets();\n    }\n  }, [contractId, correspondingContractId]);\n\n  return (\n    <Layout>\n      <div>\n        <div className=\"text-center w-1/2 mx-auto py-6 text-2xl font-bold\">\n          <h3>Create Ticket</h3>\n        </div>\n        <div className=\"flex justify-around relative \">\n          <div className=\"w-1/2\">\n            <Formik\n              initialValues={{\n                contractId: \"\",\n                correspondingContractId: \"\",\n                ticketDate: ticketDate,\n                fieldNum: \"\",\n                baleCount: 0,\n                ticketNumber: \"\",\n                ladingNumber: \"\",\n                driver: \"\",\n                truckNumber: \"\",\n                grossWeight: 0,\n                tareWeight: 0,\n                netWeight: 0,\n                netTons: 0,\n              }}\n              validationSchema={CreateTicketSchema}\n              onSubmit={async (values, actions) => {\n                let netWeight = values.grossWeight - values.tareWeight;\n                let netTons = netWeight / 2000;\n\n                const input1 = {\n                  contractId: values.contractId,\n                  correspondingContractId: values.correspondingContractId,\n                  ticketDate: ticketDate,\n                  fieldNum: values.fieldNum,\n                  baleCount: values.baleCount === \"\" ? null : values.baleCount,\n                  ticketNumber: values.ticketNumber,\n                  ladingNumber: values.ladingNumber,\n                  driver: values.driver,\n                  type: \"Ticket\",\n                  truckNumber: values.truckNumber,\n                  grossWeight: values.grossWeight,\n                  tareWeight: values.tareWeight,\n                  netWeight,\n                  netTons,\n                };\n                try {\n                  mutate(input1);\n                  setTicketSuccess1(true);\n                } catch (err) {\n                  if (err) {\n                    setTicketError(err);\n                  }\n                }\n\n                const input2 = {\n                  contractId: values.correspondingContractId,\n                  correspondingContractId: values.contractId,\n                  ticketDate: ticketDate,\n                  fieldNum: values.fieldNum,\n                  baleCount: values.baleCount === \"\" ? null : values.baleCount,\n                  ticketNumber: values.ticketNumber,\n                  ladingNumber: values.ladingNumber,\n                  driver: values.driver,\n                  type: \"Ticket\",\n                  truckNumber: values.truckNumber,\n                  grossWeight: values.grossWeight,\n                  tareWeight: values.tareWeight,\n                  netWeight,\n                  netTons,\n                };\n                try {\n                  mutate(input2);\n                  setTicketSuccess2(true);\n                } catch (err) {\n                  if (err) {\n                    setTicketError(err);\n                  }\n                }\n\n                setTimeout(() => {\n                  setTicketSuccess1(false);\n                  setTicketSuccess2(false);\n                  setCorrespondingContractId(null);\n                  setContractId(null);\n                }, 2000);\n                actions.resetForm();\n              }}\n            >\n              {({ isSubmitting, errors, touched, values }) => (\n                <Form>\n                  <div className=\"w-full mx-auto\">\n                    <div className=\"flex justify-between items-center mb-4\">\n                      <label\n                        className=\"text-gray-900 w-1/4 md:w-1/2\"\n                        htmlFor=\"ticketNumber\"\n                      >\n                        Ticket Number\n                      </label>\n                      <Field\n                        className=\"form-input w-full\"\n                        name=\"ticketNumber\"\n                        placeholder=\"Ticket Number\"\n                        autoComplete=\"on\"\n                      />\n                      {errors.ticketNumber && touched.ticketNumber ? (\n                        <div className=\"text-red-700 ml-2 bg-red-200 px-2 py-1 rounded-sm\">\n                          {errors.ticketNumber}\n                        </div>\n                      ) : null}\n                    </div>\n                    <div className=\"flex justify-between items-center mb-4\">\n                      <label\n                        className=\"text-gray-900 w-1/4 md:w-1/2\"\n                        htmlFor=\"contractId\"\n                      >\n                        Contract Number - Purchased From\n                      </label>\n                      <Field\n                        className=\"form-select w-full\"\n                        component={FormikSelect}\n                        options={contracts}\n                        name=\"contractId\"\n                        handleChange={handleContractIdChange}\n                        placeholder=\"Contract Number\"\n                      />\n                      {errors.contractId && touched.contractId ? (\n                        <div className=\"text-red-700 ml-2 bg-red-200 px-2 py-1 rounded-sm\">\n                          {errors.contractId}\n                        </div>\n                      ) : null}\n                    </div>\n                    <div className=\"flex justify-between items-center mb-4\">\n                      <label\n                        className=\"text-gray-900 w-1/4 md:w-1/2\"\n                        htmlFor=\"correspondingContractId\"\n                      >\n                        Corresponding Contract Number - Sold To\n                      </label>\n                      <Field\n                        className=\"form-select w-full\"\n                        component={FormikSelect}\n                        options={correspondingContracts}\n                        handleChange={handleCorrespondingContractIdChange}\n                        name=\"correspondingContractId\"\n                        placeholder=\"Contract Number\"\n                      />\n                      {errors.correspondingContractId &&\n                      touched.correspondingContractId ? (\n                        <div className=\"text-red-700 ml-2 bg-red-200 px-2 py-1 rounded-sm\">\n                          {errors.correspondingContractId}\n                        </div>\n                      ) : null}\n                    </div>\n                    <div className=\"flex justify-between items-center mb-4\">\n                      <label\n                        className=\"text-gray-900 w-1/4 md:w-1/2\"\n                        htmlFor=\"ticketDate\"\n                      >\n                        Ticket Date\n                      </label>\n                      <DatePicker\n                        selected={ticketDate}\n                        onChange={(date) => {\n                          console.log(date), setTicketDate(date);\n                        }}\n                        className=\"form-input w-full\"\n                      />\n                    </div>\n\n                    <div className=\"flex justify-between items-center mb-4\">\n                      <label\n                        className=\"text-gray-900 w-1/4 md:w-1/2\"\n                        htmlFor=\"fieldNum\"\n                      >\n                        Field Number\n                      </label>\n\n                      <Field\n                        className=\"form-input w-full\"\n                        name=\"fieldNum\"\n                        placeholder=\"Field Number\"\n                      />\n                      {errors.fieldNum && touched.fieldNum ? (\n                        <div className=\"text-red-700 ml-2 bg-red-200 px-2 py-1 rounded-sm\">\n                          {errors.fieldNum}\n                        </div>\n                      ) : null}\n                    </div>\n                    <div className=\"flex justify-between items-center mb-4\">\n                      <label\n                        className=\"text-gray-900 w-1/4 md:w-1/2\"\n                        htmlFor=\"baleCount\"\n                      >\n                        Bale Count\n                      </label>\n\n                      <Field\n                        className=\"form-input w-full\"\n                        name=\"baleCount\"\n                        placeholder=\"Bale Count\"\n                        type=\"number\"\n                      />\n                    </div>\n                    <div className=\"flex justify-between items-center mb-4 w-full\">\n                      <label\n                        className=\"text-gray-900 w-1/4 md:w-1/2 pr-4\"\n                        name=\"ladingNumber\"\n                      >\n                        Lading Number\n                      </label>\n                      <Field\n                        className=\"form-input w-full\"\n                        name=\"ladingNumber\"\n                        placeholder=\"Lading Number\"\n                      />\n                      {errors.ladingNumber && touched.ladingNumber ? (\n                        <div className=\"text-red-700 ml-2 bg-red-200 px-2 py-1 rounded-sm\">\n                          {errors.ladingNumber}\n                        </div>\n                      ) : null}\n                    </div>\n                    <div className=\"flex justify-between items-center mb-4\">\n                      <label\n                        className=\"w-1/4 text-gray-900 md:w-1/2\"\n                        htmlFor=\"driver\"\n                      >\n                        Driver\n                      </label>\n                      <Field\n                        className=\"form-input w-full\"\n                        name=\"driver\"\n                        placeholder=\"Driver\"\n                      />\n                      {errors.drivers && touched.drivers ? (\n                        <div className=\"text-red-700 ml-2 bg-red-200 px-2 py-1 rounded-sm\">\n                          {errors.drivers}\n                        </div>\n                      ) : null}\n                    </div>\n                    <div className=\"flex justify-between items-center mb-4\">\n                      <label\n                        className=\"w-1/4 text-gray-900 md:w-1/2\"\n                        htmlFor=\"truckNumber\"\n                      >\n                        Truck Number\n                      </label>\n                      <Field\n                        className=\"form-input w-full\"\n                        name=\"truckNumber\"\n                        placeholder=\"Truck Number\"\n                      />\n                      {errors.truckNumber && touched.truckNumber ? (\n                        <div className=\"text-red-700 ml-2 bg-red-200 px-2 py-1 rounded-sm\">\n                          {errors.truckNumber}\n                        </div>\n                      ) : null}\n                    </div>\n                    <div className=\"flex justify-between items-center mb-4\">\n                      <label\n                        className=\"w-1/4 text-gray-900 md:w-1/2\"\n                        htmlFor=\"grossWeight\"\n                      >\n                        Gross Weight\n                      </label>\n                      <Field\n                        className=\"form-input w-full\"\n                        name=\"grossWeight\"\n                        type=\"number\"\n                      />\n                      {errors.grossWeight && touched.grossWeight ? (\n                        <div className=\"text-red-700 ml-2 bg-red-200 px-2 py-1 rounded-sm\">\n                          {errors.grossWeight}\n                        </div>\n                      ) : null}\n                    </div>\n                    <div className=\"flex justify-between items-center mb-4\">\n                      <label\n                        className=\"w-1/4 text-gray-900 md:w-1/2\"\n                        htmlFor=\"tareWeight\"\n                      >\n                        Tare Weight\n                      </label>\n                      <Field\n                        className=\"form-input w-full\"\n                        name=\"tareWeight\"\n                        type=\"number\"\n                      />\n                      {errors.tareWeight && touched.tareWeight ? (\n                        <div className=\"text-red-700 ml-2 bg-red-200 px-2 py-1 rounded-sm\">\n                          {errors.tareWeight}\n                        </div>\n                      ) : null}\n                    </div>\n                    <div className=\"flex justify-between items-center mb-4\">\n                      <label\n                        className=\"w-1/4 text-gray-900 md:w-1/2\"\n                        htmlFor=\"netWeight\"\n                      >\n                        Net Weight\n                      </label>\n                      <div>\n                        <span>\n                          {values.grossWeight && values.tareWeight\n                            ? (values.grossWeight - values.tareWeight).toFixed(\n                                2\n                              )\n                            : \"Not calculated\"}\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"flex justify-between items-center mb-4\">\n                      <label\n                        className=\"w-1/4 text-gray-900 md:w-1/2\"\n                        htmlFor=\"netTons\"\n                      >\n                        Net Tons\n                      </label>\n                      <div>\n                        <span>\n                          {values.grossWeight && values.tareWeight\n                            ? (\n                                (values.grossWeight - values.tareWeight) /\n                                2000\n                              ).toFixed(2)\n                            : \"Not calculated\"}\n                        </span>\n                      </div>\n                    </div>\n\n                    <div className=\"flex justify-center mt-12\">\n                      <button\n                        className=\"px-3 py-2 border border-red-500 shadow hover:bg-red-500 hover:text-white mr-12\"\n                        onClick={() => router.back()}\n                        type=\"button\"\n                      >\n                        Cancel\n                      </button>\n                      <button\n                        className=\"px-3 py-2 border border-gray-800 shadow hover:bg-gray-800 hover:text-white disabled:opacity-25\"\n                        type=\"submit\"\n                        disabled={\n                          isSubmitting ||\n                          (purchasedFromQtyRemaining &&\n                            purchasedFromQtyRemaining.qtyRemaining <= 0) ||\n                          (soldToQtyRemaining &&\n                            soldToQtyRemaining.qtyRemaining < 0.01)\n                        }\n                      >\n                        Submit\n                      </button>\n                    </div>\n                  </div>\n                </Form>\n              )}\n            </Formik>\n            {ticketError ? (\n              <div className=\"bg-red-600 text-white\">\n                {console.log(ticketError)}\n              </div>\n            ) : (\n              <div></div>\n            )}\n            {ticketSuccess1 && ticketSuccess2 ? (\n              <div className=\"absolute inset-0 flex items-center justify-center \">\n                <div className=\" w-64 h-24 text-white bg-green-500 bg-opacity-75 py-8\">\n                  <span className=\"px-4\">Successfully created ticet.</span>\n                </div>\n              </div>\n            ) : (\n              <div></div>\n            )}\n          </div>\n          <div>\n            <div className=\"w-2/12\">\n              <div className=\"border-b-4 w-full border-gray-600 mb-3 text-center\">\n                <h6 className=\"text-gray-900 text-lg\">Created Tickets</h6>\n              </div>\n              <div>\n                <ul>\n                  {createdTickets.length ? (\n                    createdTickets.map((ticket) => (\n                      <li>{`${truncateString(ticket.id, 7)} - ${\n                        ticket.ticketNumber\n                      }`}</li>\n                    ))\n                  ) : (\n                    <div>0</div>\n                  )}\n                </ul>\n              </div>\n            </div>\n            <div>\n              <div className=\"mt-8 border-b-4 border-gray-600 mb-2\">\n                <h6>Chosen Contract Values</h6>\n              </div>\n              {purchasedFromQtyRemaining ? (\n                <div className=\"bg-blue-300 bg-opacity-50 px-2 py-2\">\n                  <p>Purchased From:</p>\n                  <div>\n                    <span>{purchasedFromQtyRemaining.contractNumber}</span>\n                  </div>\n                  <div>\n                    <span>Contract Qty: </span>\n                    <span>{purchasedFromQtyRemaining.contractedQty}</span>\n                  </div>\n                  <div>\n                    <span>Qty Remaining: </span>\n                    <span\n                      className={`${\n                        purchasedFromQtyRemaining.qtyRemaining < 25\n                          ? \"text-red-500\"\n                          : \"text-gray-900\"\n                      }`}\n                    >\n                      {purchasedFromQtyRemaining.qtyRemaining.toFixed(2)}\n                    </span>\n                  </div>\n                </div>\n              ) : null}\n              {soldToQtyRemaining ? (\n                <div className=\"bg-green-300 bg-opacity-50 px-2 py-2 mt-2\">\n                  <p>Sold To:</p>\n                  <div>\n                    <span>{soldToQtyRemaining.contractNumber}</span>\n                  </div>\n                  <div>\n                    <span>Contract Qty: </span>\n                    <span>{soldToQtyRemaining.contractedQty}</span>\n                  </div>\n                  <div>\n                    <span>Qty Remaining: </span>\n                    <span\n                      className={`${\n                        soldToQtyRemaining.qtyRemaining < 25\n                          ? \"text-red-500\"\n                          : \"text-gray-900\"\n                      }`}\n                    >\n                      {soldToQtyRemaining.qtyRemaining.toFixed(2)}\n                    </span>\n                  </div>\n                </div>\n              ) : null}\n            </div>\n          </div>\n        </div>\n      </div>\n      <ReactQueryDevtools />\n    </Layout>\n  );\n};\n\nexport async function getServerSideProps({ req, res }) {\n  const { Auth } = withSSRContext({ req });\n  try {\n    const user = await Auth.currentAuthenticatedUser();\n\n    return {\n      props: {\n        authenticated: true,\n        username: user.username,\n      },\n    };\n  } catch (err) {\n    res.writeHead(302, { Location: \"/sign-in\" });\n    res.end();\n    return {\n      props: {\n        authenticated: false,\n      },\n    };\n  }\n}\n\nexport default CreateTicket;\n"]},"metadata":{},"sourceType":"module"}