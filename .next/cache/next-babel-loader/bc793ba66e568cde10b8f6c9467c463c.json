{"ast":null,"code":"var _jsxFileName = \"/Users/gregleeper/jds/pages/vendors/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from \"../../components/layout\";\nimport { useMemo, useEffect, useState } from \"react\";\nimport { API, withSSRContext } from \"aws-amplify\";\nimport { listVendors } from \"../../src/graphql/queries.ts\";\nimport Link from \"next/link\";\nimport Table from \"../../components/table\";\nimport { useQuery } from \"react-query\";\nimport { ReactQueryDevtools } from \"react-query-devtools\";\n\nconst Vendors = () => {\n  const {\n    0: vendorsState,\n    1: setVendorsState\n  } = useState([]);\n  const {\n    data\n  } = useQuery(\"vendors\", async () => {\n    const {\n      data: {\n        listVendors: vendorData\n      }\n    } = await API.graphql({\n      query: listVendors,\n      variables: {\n        limit: 1000\n      }\n    });\n    return vendorData;\n  }, {\n    cacheTime: 1000 * 60 * 60\n  });\n  useEffect(() => {\n    if (data) {\n      setVendorsState(data.items);\n    }\n  }, [data]);\n  const columns = useMemo(() => [{\n    Header: \"Edit\",\n    accessor: \"id\",\n    Cell: ({\n      value\n    }) => __jsx(Link, {\n      href: \"/vendors/edit/[id]\",\n      as: `/vendors/edit/${value}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 11\n      }\n    }, __jsx(\"a\", {\n      className: \"text-blue-600 underline hover:text-blue-800 hover:no-underline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 13\n      }\n    }, \" \", \"View\")),\n    disableFilters: true\n  }, {\n    Header: \"Vendor #\",\n    accessor: \"vendorNumber\"\n  }, {\n    Header: \"Company Report Name\",\n    accessor: \"companyReportName\",\n    disableFilters: true\n  }, {\n    Header: \"Company Listing Name\",\n    accessor: \"companyListingName\",\n    disableFilters: true\n  }, {\n    Header: \"Address 1\",\n    accessor: \"address1\",\n    disableFilters: true\n  }, {\n    Header: \"Address 2\",\n    accessor: \"address2\",\n    disableFilters: true\n  }, {\n    Header: \"City\",\n    accessor: \"city\"\n  }, {\n    Header: \"State\",\n    accessor: \"state\"\n  }, {\n    Header: \"Zip\",\n    accessor: \"zipCode\",\n    disableFilters: true\n  }, {\n    Header: \"Phone\",\n    accessor: \"telephoneNum\",\n    disableFilters: true\n  }], []);\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"px-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"text-center w-1/2 mx-auto py-6 text-2xl font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, \"Vendors\")), __jsx(\"div\", {\n    className: \"my-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }, __jsx(Link, {\n    href: \"/vendors/create\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, __jsx(\"a\", {\n    className: \"px-3 py-2 border border-gray-800 shadow hover:bg-gray-800 hover:text-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, \"Create New\"))), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }, __jsx(Table, {\n    data: vendorsState,\n    columns: columns,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }))), __jsx(ReactQueryDevtools, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport async function getServerSideProps({\n  req,\n  res\n}) {\n  const {\n    Auth\n  } = withSSRContext({\n    req\n  });\n\n  try {\n    const user = await Auth.currentAuthenticatedUser();\n    return {\n      props: {\n        authenticated: true,\n        username: user.username\n      }\n    };\n  } catch (err) {\n    res.writeHead(302, {\n      Location: \"/sign-in\"\n    });\n    res.end();\n    return {\n      props: {\n        authenticated: false\n      }\n    };\n  }\n}\nexport default Vendors;","map":{"version":3,"sources":["/Users/gregleeper/jds/pages/vendors/index.js"],"names":["Layout","useMemo","useEffect","useState","API","withSSRContext","listVendors","Link","Table","useQuery","ReactQueryDevtools","Vendors","vendorsState","setVendorsState","data","vendorData","graphql","query","variables","limit","cacheTime","items","columns","Header","accessor","Cell","value","disableFilters","getServerSideProps","req","res","Auth","user","currentAuthenticatedUser","props","authenticated","username","err","writeHead","Location","end"],"mappings":";;;AAAA,OAAOA,MAAP,MAAmB,yBAAnB;AACA,SAASC,OAAT,EAAkBC,SAAlB,EAA6BC,QAA7B,QAA6C,OAA7C;AACA,SAASC,GAAT,EAAcC,cAAd,QAAoC,aAApC;AACA,SAASC,WAAT,QAA4B,8BAA5B;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,KAAP,MAAkB,wBAAlB;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,kBAAT,QAAmC,sBAAnC;;AACA,MAAMC,OAAO,GAAG,MAAM;AACpB,QAAM;AAAA,OAACC,YAAD;AAAA,OAAeC;AAAf,MAAkCV,QAAQ,CAAC,EAAD,CAAhD;AAEA,QAAM;AAAEW,IAAAA;AAAF,MAAWL,QAAQ,CACvB,SADuB,EAEvB,YAAY;AACV,UAAM;AACJK,MAAAA,IAAI,EAAE;AAAER,QAAAA,WAAW,EAAES;AAAf;AADF,QAEF,MAAMX,GAAG,CAACY,OAAJ,CAAY;AACpBC,MAAAA,KAAK,EAAEX,WADa;AAEpBY,MAAAA,SAAS,EAAE;AACTC,QAAAA,KAAK,EAAE;AADE;AAFS,KAAZ,CAFV;AAQA,WAAOJ,UAAP;AACD,GAZsB,EAavB;AACEK,IAAAA,SAAS,EAAE,OAAO,EAAP,GAAY;AADzB,GAbuB,CAAzB;AAkBAlB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIY,IAAJ,EAAU;AACRD,MAAAA,eAAe,CAACC,IAAI,CAACO,KAAN,CAAf;AACD;AACF,GAJQ,EAIN,CAACP,IAAD,CAJM,CAAT;AAMA,QAAMQ,OAAO,GAAGrB,OAAO,CACrB,MAAM,CACJ;AACEsB,IAAAA,MAAM,EAAE,MADV;AAEEC,IAAAA,QAAQ,EAAE,IAFZ;AAGEC,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA;AAAF,KAAD,KACJ,MAAC,IAAD;AAAM,MAAA,IAAI,EAAC,oBAAX;AAAgC,MAAA,EAAE,EAAG,iBAAgBA,KAAM,EAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,SAAS,EAAC,gEAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,GADH,SADF,CAJJ;AAWEC,IAAAA,cAAc,EAAE;AAXlB,GADI,EAcJ;AACEJ,IAAAA,MAAM,EAAE,UADV;AAEEC,IAAAA,QAAQ,EAAE;AAFZ,GAdI,EAkBJ;AACED,IAAAA,MAAM,EAAE,qBADV;AAEEC,IAAAA,QAAQ,EAAE,mBAFZ;AAGEG,IAAAA,cAAc,EAAE;AAHlB,GAlBI,EAuBJ;AACEJ,IAAAA,MAAM,EAAE,sBADV;AAEEC,IAAAA,QAAQ,EAAE,oBAFZ;AAGEG,IAAAA,cAAc,EAAE;AAHlB,GAvBI,EA4BJ;AACEJ,IAAAA,MAAM,EAAE,WADV;AAEEC,IAAAA,QAAQ,EAAE,UAFZ;AAGEG,IAAAA,cAAc,EAAE;AAHlB,GA5BI,EAiCJ;AACEJ,IAAAA,MAAM,EAAE,WADV;AAEEC,IAAAA,QAAQ,EAAE,UAFZ;AAGEG,IAAAA,cAAc,EAAE;AAHlB,GAjCI,EAsCJ;AACEJ,IAAAA,MAAM,EAAE,MADV;AAEEC,IAAAA,QAAQ,EAAE;AAFZ,GAtCI,EA0CJ;AACED,IAAAA,MAAM,EAAE,OADV;AAEEC,IAAAA,QAAQ,EAAE;AAFZ,GA1CI,EA8CJ;AACED,IAAAA,MAAM,EAAE,KADV;AAEEC,IAAAA,QAAQ,EAAE,SAFZ;AAGEG,IAAAA,cAAc,EAAE;AAHlB,GA9CI,EAmDJ;AACEJ,IAAAA,MAAM,EAAE,OADV;AAEEC,IAAAA,QAAQ,EAAE,cAFZ;AAGEG,IAAAA,cAAc,EAAE;AAHlB,GAnDI,CADe,EA0DrB,EA1DqB,CAAvB;AA6DA,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,mDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,CADF,EAIE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC,iBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAG,IAAA,SAAS,EAAC,4EAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,CADF,CAJF,EAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AAAO,IAAA,IAAI,EAAEf,YAAb;AAA2B,IAAA,OAAO,EAAEU,OAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAXF,CADF,EAgBE,MAAC,kBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAhBF,CADF;AAoBD,CA5GD;;AA8GA,OAAO,eAAeM,kBAAf,CAAkC;AAAEC,EAAAA,GAAF;AAAOC,EAAAA;AAAP,CAAlC,EAAgD;AACrD,QAAM;AAAEC,IAAAA;AAAF,MAAW1B,cAAc,CAAC;AAAEwB,IAAAA;AAAF,GAAD,CAA/B;;AACA,MAAI;AACF,UAAMG,IAAI,GAAG,MAAMD,IAAI,CAACE,wBAAL,EAAnB;AAEA,WAAO;AACLC,MAAAA,KAAK,EAAE;AACLC,QAAAA,aAAa,EAAE,IADV;AAELC,QAAAA,QAAQ,EAAEJ,IAAI,CAACI;AAFV;AADF,KAAP;AAMD,GATD,CASE,OAAOC,GAAP,EAAY;AACZP,IAAAA,GAAG,CAACQ,SAAJ,CAAc,GAAd,EAAmB;AAAEC,MAAAA,QAAQ,EAAE;AAAZ,KAAnB;AACAT,IAAAA,GAAG,CAACU,GAAJ;AACA,WAAO;AACLN,MAAAA,KAAK,EAAE;AACLC,QAAAA,aAAa,EAAE;AADV;AADF,KAAP;AAKD;AACF;AAED,eAAexB,OAAf","sourcesContent":["import Layout from \"../../components/layout\";\nimport { useMemo, useEffect, useState } from \"react\";\nimport { API, withSSRContext } from \"aws-amplify\";\nimport { listVendors } from \"../../src/graphql/queries.ts\";\nimport Link from \"next/link\";\nimport Table from \"../../components/table\";\nimport { useQuery } from \"react-query\";\nimport { ReactQueryDevtools } from \"react-query-devtools\";\nconst Vendors = () => {\n  const [vendorsState, setVendorsState] = useState([]);\n\n  const { data } = useQuery(\n    \"vendors\",\n    async () => {\n      const {\n        data: { listVendors: vendorData },\n      } = await API.graphql({\n        query: listVendors,\n        variables: {\n          limit: 1000,\n        },\n      });\n      return vendorData;\n    },\n    {\n      cacheTime: 1000 * 60 * 60,\n    }\n  );\n\n  useEffect(() => {\n    if (data) {\n      setVendorsState(data.items);\n    }\n  }, [data]);\n\n  const columns = useMemo(\n    () => [\n      {\n        Header: \"Edit\",\n        accessor: \"id\",\n        Cell: ({ value }) => (\n          <Link href=\"/vendors/edit/[id]\" as={`/vendors/edit/${value}`}>\n            <a className=\"text-blue-600 underline hover:text-blue-800 hover:no-underline\">\n              {\" \"}\n              View\n            </a>\n          </Link>\n        ),\n        disableFilters: true,\n      },\n      {\n        Header: \"Vendor #\",\n        accessor: \"vendorNumber\",\n      },\n      {\n        Header: \"Company Report Name\",\n        accessor: \"companyReportName\",\n        disableFilters: true,\n      },\n      {\n        Header: \"Company Listing Name\",\n        accessor: \"companyListingName\",\n        disableFilters: true,\n      },\n      {\n        Header: \"Address 1\",\n        accessor: \"address1\",\n        disableFilters: true,\n      },\n      {\n        Header: \"Address 2\",\n        accessor: \"address2\",\n        disableFilters: true,\n      },\n      {\n        Header: \"City\",\n        accessor: \"city\",\n      },\n      {\n        Header: \"State\",\n        accessor: \"state\",\n      },\n      {\n        Header: \"Zip\",\n        accessor: \"zipCode\",\n        disableFilters: true,\n      },\n      {\n        Header: \"Phone\",\n        accessor: \"telephoneNum\",\n        disableFilters: true,\n      },\n    ],\n    []\n  );\n\n  return (\n    <Layout>\n      <div className=\"px-6\">\n        <div className=\"text-center w-1/2 mx-auto py-6 text-2xl font-bold\">\n          <h3>Vendors</h3>\n        </div>\n        <div className=\"my-6\">\n          <Link href=\"/vendors/create\">\n            <a className=\"px-3 py-2 border border-gray-800 shadow hover:bg-gray-800 hover:text-white\">\n              Create New\n            </a>\n          </Link>\n        </div>\n        <div>\n          <Table data={vendorsState} columns={columns} />\n        </div>\n      </div>\n      <ReactQueryDevtools />\n    </Layout>\n  );\n};\n\nexport async function getServerSideProps({ req, res }) {\n  const { Auth } = withSSRContext({ req });\n  try {\n    const user = await Auth.currentAuthenticatedUser();\n\n    return {\n      props: {\n        authenticated: true,\n        username: user.username,\n      },\n    };\n  } catch (err) {\n    res.writeHead(302, { Location: \"/sign-in\" });\n    res.end();\n    return {\n      props: {\n        authenticated: false,\n      },\n    };\n  }\n}\n\nexport default Vendors;\n"]},"metadata":{},"sourceType":"module"}